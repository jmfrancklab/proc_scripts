
.. DO NOT EDIT.
.. THIS FILE WAS AUTOMATICALLY GENERATED BY SPHINX-GALLERY.
.. TO MAKE CHANGES, EDIT THE SOURCE PYTHON FILE:
.. "auto_examples/generate_integrals_RealData.py"
.. LINE NUMBERS ARE GIVEN BELOW.

.. only:: html

    .. note::
        :class: sphx-glr-download-link-note

        :ref:`Go to the end <sphx_glr_download_auto_examples_generate_integrals_RealData.py>`
        to download the full example code

.. rst-class:: sphx-glr-example-title

.. _sphx_glr_auto_examples_generate_integrals_RealData.py:

Convert 2D  Real Data into Integrals with Errors
===================================================

Take a 2D dataset and convert it to a table of integrals with errors, utilizing
all the bells and whistles (frequency and time selection, alignment, etc.)

Demonstrate on a fake dataset of an inversion recovery with multiple repeats (φ
× t2 × vd × repeats) w/ normally distributed random noise, and with fluctuating field
(normally distributed field variation).

.. GENERATED FROM PYTHON SOURCE LINES 11-65


.. rst-class:: sphx-glr-script-out

.. code-block:: pytb

    Traceback (most recent call last):
      File "/home/jmfranck/git_repos/proc_scripts/examples/generate_integrals_RealData.py", line 55, in <module>
        s_int, s = generate_integrals(
                   ^^^^^^^^^^^^^^^^^^^
      File "/home/jmfranck/git_repos/proc_scripts/pyspecProcScripts/generate_integrals.py", line 89, in generate_integrals
        best_shift = hermitian_function_test(
                     ^^^^^^^^^^^^^^^^^^^^^^^^
      File "/home/jmfranck/git_repos/proc_scripts/pyspecProcScripts/phasing.py", line 620, in hermitian_function_test
        s_timedom.getaxis(direct)[0] == 0.0
    AssertionError: In order to
        calculate the signal energy term correctly, the
        signal must start at t=0  so set the start of the
        acquisition in the *non-aliased* time domain to 0 (something like
        data['t2'] -= acqstart) to avoid confusion






|

.. code-block:: Python

    from pylab import *
    from pyspecdata import *
    from pyspecProcScripts import *
    import sympy as s

    init_logging(level="debug")

    rcParams["image.aspect"] = "auto"  # needed for sphinx gallery
    # sphinx_gallery_thumbnail_number = 3

    fl = fl_mod()
    signal_pathway = {"ph1": 1}
    t_max = 0.1

    with figlist_var() as fl:
        for (
            filename,
            exp_type,
            nodename,
            postproc,
            indirect,
            clock_correction,
            label,
            f_range,
        ) in [
            (
                "211223_Ras_M67R1a_capProbe",
                "ODNP_NMR_comp/ODNP",
                "enhancement",
                "spincore_ODNP_v1",
                "power",
                False,
                "M67 Ras mutation",
                (-0.5e3, 0.5e3),
            )
        ]:
            fl.basename = "(%s)" % label
            s = find_file(
                filename,
                exp_type=exp_type,
                expno=nodename,
                postproc=postproc,
                lookup=lookup_table,
            )
            s_int, s = generate_integrals(
                s,
                signal_pathway=signal_pathway,
                searchstr=label,
                f_range=f_range,
                indirect=indirect,
                alias_slop=2,
                clock_correction=clock_correction,
                fl=fl,
            )


.. rst-class:: sphx-glr-timing

   **Total running time of the script:** (0 minutes 0.305 seconds)


.. _sphx_glr_download_auto_examples_generate_integrals_RealData.py:

.. only:: html

  .. container:: sphx-glr-footer sphx-glr-footer-example

    .. container:: sphx-glr-download sphx-glr-download-jupyter

      :download:`Download Jupyter notebook: generate_integrals_RealData.ipynb <generate_integrals_RealData.ipynb>`

    .. container:: sphx-glr-download sphx-glr-download-python

      :download:`Download Python source code: generate_integrals_RealData.py <generate_integrals_RealData.py>`


.. only:: html

 .. rst-class:: sphx-glr-signature

    `Gallery generated by Sphinx-Gallery <https://sphinx-gallery.github.io>`_
