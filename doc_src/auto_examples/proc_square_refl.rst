
.. DO NOT EDIT.
.. THIS FILE WAS AUTOMATICALLY GENERATED BY SPHINX-GALLERY.
.. TO MAKE CHANGES, EDIT THE SOURCE PYTHON FILE:
.. "auto_examples\proc_square_refl.py"
.. LINE NUMBERS ARE GIVEN BELOW.

.. only:: html

    .. note::
        :class: sphx-glr-download-link-note

        Click :ref:`here <sphx_glr_download_auto_examples_proc_square_refl.py>`
        to download the full example code

.. rst-class:: sphx-glr-example-title

.. _sphx_glr_auto_examples_proc_square_refl.py:

Process a square wave reflection
===================================

Processes a square wave reflection in order to calculate the 
Q of a NMR probe.
Optional to show the phasing and real on top 
of the fitted square wave reflection.

.. GENERATED FROM PYTHON SOURCE LINES 9-25



.. rst-class:: sphx-glr-horizontal


    *

      .. image:: /auto_examples/images/sphx_glr_proc_square_refl_001.png
          :alt: hairpin probe show the frequency distribution
          :class: sphx-glr-multi-img

    *

      .. image:: /auto_examples/images/sphx_glr_proc_square_refl_002.png
          :alt: hairpin probe after slice and mix down freq domain
          :class: sphx-glr-multi-img

    *

      .. image:: /auto_examples/images/sphx_glr_proc_square_refl_003.png
          :alt: analytic signal
          :class: sphx-glr-multi-img

    *

      .. image:: /auto_examples/images/sphx_glr_proc_square_refl_004.png
          :alt: blips, blips
          :class: sphx-glr-multi-img

    *

      .. image:: /auto_examples/images/sphx_glr_proc_square_refl_005.png
          :alt: solenoid probe show the frequency distribution
          :class: sphx-glr-multi-img

    *

      .. image:: /auto_examples/images/sphx_glr_proc_square_refl_006.png
          :alt: solenoid probe after slice and mix down freq domain
          :class: sphx-glr-multi-img


.. rst-class:: sphx-glr-script-out

 Out:

 .. code-block:: none

    logging output to C:\Users\Alex Guinness\pyspecdata.0.log
    C:\Users\Alex Guinness\pyspecdata.0.log appears to be locked or otherwise inaccessible: I'm going to explore other options for fileno
    logging output to C:\Users\Alex Guinness\pyspecdata.1.log
    --> proc_square_refl.py(17):pyspecdata.core             <module> 2021-06-11 17:01:29,695
    INFO: processing dataset hairpin probe
    --> proc_square_refl.py(17):pyspecdata.core             <module> 2021-06-11 17:01:29,695
    INFO: processing dataset hairpin probe
    logarithmic
    trying to shift by 0.0
    c:\users\alex guinness\gitstuff\pyspecdata\pyspecdata\fourier\ft_shift.py:204: RuntimeWarning: invalid value encountered in double_scalars
      if abs((n_dt - round(n_dt))/n_dt) > 1e-3:
    setting t to -6.127548980407844e-06
    --> analyze_square_refl.py(102):root  analyze_square_refl 2021-06-11 17:01:29,867
    INFO: frq: 14889966.915265452
    --> analyze_square_refl.py(102):root  analyze_square_refl 2021-06-11 17:01:29,867
    INFO: frq: 14889966.915265452
    --> analyze_square_refl.py(126):root  analyze_square_refl 2021-06-11 17:01:29,945
    INFO: the amplitude is 0.5041899787959185
    --> analyze_square_refl.py(126):root  analyze_square_refl 2021-06-11 17:01:29,945
    INFO: the amplitude is 0.5041899787959185
    {A, R}
    {\bf Warning:} You have no error associated with your plot, and I want to flag this for now


    c:\users\alex guinness\gitstuff\pyspecdata\pyspecdata\core.py:7623: Warning: You have no error associated with your plot, and I want to flag this for now
      warnings.warn('You have no error associated with your plot, and I want to flag this for now',Warning)
    --> analyze_square_refl.py(170):root  analyze_square_refl 2021-06-11 17:01:30,101
    INFO: output: {'A': 0.619157866200667, 'C': 0.0007775306046049341, 'R': 8731153.658925781}
    --> analyze_square_refl.py(170):root  analyze_square_refl 2021-06-11 17:01:30,101
    INFO: output: {'A': 0.619157866200667, 'C': 0.0007775306046049341, 'R': 8731153.658925781}
    --> analyze_square_refl.py(171):root  analyze_square_refl 2021-06-11 17:01:30,366
    INFO: latex: $f(t)=0.62 e^{- 8.73\times 10^{6} t} + 0.00$
    --> analyze_square_refl.py(171):root  analyze_square_refl 2021-06-11 17:01:30,366
    INFO: latex: $f(t)=0.62 e^{- 8.73\times 10^{6} t} + 0.00$
    --> analyze_square_refl.py(180):root  analyze_square_refl 2021-06-11 17:01:30,366
    INFO: -11728.316475971678
    --> analyze_square_refl.py(180):root  analyze_square_refl 2021-06-11 17:01:30,366
    INFO: -11728.316475971678
    --> proc_square_refl.py(17):pyspecdata.core             <module> 2021-06-11 17:01:30,445
    INFO: processing dataset solenoid probe
    --> proc_square_refl.py(17):pyspecdata.core             <module> 2021-06-11 17:01:30,445
    INFO: processing dataset solenoid probe
    logarithmic
    trying to shift by 0.0
    c:\users\alex guinness\gitstuff\pyspecdata\pyspecdata\fourier\ft_shift.py:204: RuntimeWarning: invalid value encountered in double_scalars
      if abs((n_dt - round(n_dt))/n_dt) > 1e-3:
    setting t to -7.347061175529797e-06
    --> analyze_square_refl.py(102):root  analyze_square_refl 2021-06-11 17:01:30,616
    INFO: frq: 14889553.824459042
    --> analyze_square_refl.py(102):root  analyze_square_refl 2021-06-11 17:01:30,616
    INFO: frq: 14889553.824459042
    --> analyze_square_refl.py(126):root  analyze_square_refl 2021-06-11 17:01:30,663
    INFO: the amplitude is 0.5013108588730283
    --> analyze_square_refl.py(126):root  analyze_square_refl 2021-06-11 17:01:30,663
    INFO: the amplitude is 0.5013108588730283
    {A, R}
    {\bf Warning:} You have no error associated with your plot, and I want to flag this for now


    c:\users\alex guinness\gitstuff\pyspecdata\pyspecdata\core.py:7623: Warning: You have no error associated with your plot, and I want to flag this for now
      warnings.warn('You have no error associated with your plot, and I want to flag this for now',Warning)
    --> analyze_square_refl.py(170):root  analyze_square_refl 2021-06-11 17:01:30,726
    INFO: output: {'A': 0.5118213794712735, 'C': 0.002100769021292038, 'R': 3969130.4439018033}
    --> analyze_square_refl.py(170):root  analyze_square_refl 2021-06-11 17:01:30,726
    INFO: output: {'A': 0.5118213794712735, 'C': 0.002100769021292038, 'R': 3969130.4439018033}
    --> analyze_square_refl.py(171):root  analyze_square_refl 2021-06-11 17:01:30,726
    INFO: latex: $f(t)=0.51 e^{- 3.97\times 10^{6} t} + 0.00$
    --> analyze_square_refl.py(171):root  analyze_square_refl 2021-06-11 17:01:30,726
    INFO: latex: $f(t)=0.51 e^{- 3.97\times 10^{6} t} + 0.00$
    --> analyze_square_refl.py(180):root  analyze_square_refl 2021-06-11 17:01:30,741
    INFO: 22313.576370994568
    --> analyze_square_refl.py(180):root  analyze_square_refl 2021-06-11 17:01:30,741
    INFO: 22313.576370994568






|

.. code-block:: default

    from pylab import *
    from pyspecdata import *
    from pyspecProcScripts.third_level.analyze_square_refl import analyze_square_refl
    from pyspecProcScripts import * 
    init_logging(level="debug")
    with fl_mod() as fl:
        for filename, expno, dataset_name in [("210125_sqwv_cap_probe_1", "capture1", "hairpin probe"),
                ('210111_sqwv_sol_probe_1', 'capture1', 'solenoid probe')]:
            logger.info(strm("processing dataset",dataset_name))
            d = find_file(filename,exp_type='ODNP_NMR_comp/test_equip',expno=expno)
            d.set_units('t','s').name('Amplitude').set_units('V')
            d.setaxis("ch", r_[1, 2])
            d.set_units("t", "s")
            analyze_square_refl(d, label=dataset_name, fl=fl,
                    show_analytic_signal_phase=False,
                    show_analytic_signal_real=False)


.. rst-class:: sphx-glr-timing

   **Total running time of the script:** ( 0 minutes  4.327 seconds)


.. _sphx_glr_download_auto_examples_proc_square_refl.py:


.. only :: html

 .. container:: sphx-glr-footer
    :class: sphx-glr-footer-example



  .. container:: sphx-glr-download sphx-glr-download-python

     :download:`Download Python source code: proc_square_refl.py <proc_square_refl.py>`



  .. container:: sphx-glr-download sphx-glr-download-jupyter

     :download:`Download Jupyter notebook: proc_square_refl.ipynb <proc_square_refl.ipynb>`


.. only:: html

 .. rst-class:: sphx-glr-signature

    `Gallery generated by Sphinx-Gallery <https://sphinx-gallery.github.io>`_
